<html>
<head>
	<title>Home | KatMana(R)</title>
	<link rel="stylesheet" type="text/css" href="stylesheet/foundation.min.css">
	<link rel="stylesheet" type="text/css" href="stylesheet/normalize.css">
	<link rel="stylesheet" type="text/css" href="stylesheet/icons/foundation-icons.css">
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>
    <script src="javascript/jquery-2.1.1.min.js"></script>
    <script src="javascript/jquery-ui.min.js"></script>
    <script src="javascript/handlebars-v2.0.0.js"></script>
    <script type="text/javascript" src="javascript/foundation.min.js"></script>
    <script type="text/javascript" src="javascript/foundation.offcanvas.js"></script>
    <script type="text/javascript" src="javascript/foundation.dropdown.js"></script>
    <script type="text/javascript" src="javascript/index.js"></script>
    <script type="text/javascript" src="javascript/point.js"></script>
    <style type="text/css">
	    #map-canvas {
	    	width: 100%;
	    	height: 94%;
	    }

	    #map-canvas img {
	    	max-width: initial;
	    }

	    .search-text {
	    	text-align: center;
	    	color: #fff;
	    	font-size: 20px;	    	
	    }

	    .tab-bar img {
	    	width: 73px;
	    }

	    .fi-braille, .fi-arrow-right, .fi-arrow-left {
	    	font-size: 40px;
	    }

	    .fi-wrench, .fi-list {
	    	font-size: 28px;
	    }

	    input {
	    	width: 100%;
	    }

	    i:hover {
	    	cursor: pointer;
	    }

	    .login-dropdown {
	    	margin-left:-170px!important;
	    }

	    .login-dropdown::before {
	    	left:93%!important;
	    }

	    .login-dropdown::after {
	    	left:92.5%!important;
	    }	    
    </style>
    <script id="no-point-notice" type="text/x-handlebars-template">
      <span style="color:white;" class="notice">Sorry, no points is available.</span>
    </script>
    <script id="point-content-string" type="text/x-handlebars-template">
      <div id="content">
        <p style="font-weight: bold; margin:0" id="firstHeading" class="firstHeading">{{name}}</p>
        <div id="bodyContent">
        <p style="margin:0">{{description}}</p>
        </div>
      </div>
    </script>
</head>
<body>
	<div class="off-canvas-wrap" data-offcanvas>
		<div class="inner-wrap">
			<nav class="tab-bar">
				<div class="row">
					<div id="drop2" data-dropdown-content class="login-dropdown f-dropdown content small" aria-hidden="true" tabindex="-1">
						<div class="row">
							<div class="header small-12 columns">
								<span style="color:#000">members area</span>
							</div>
							<div class="small-12 columns">
								<a href="edit_account.html">update account</a>
							</div>
							<div class="small-12 columns">
								<form action="logout">
									<button type="submit">logout</button>
								</form>
							</div>
						</div>
					</div>	
					<div class="small-2 columns">
						<img src="media/logo.png">
					</div>
					<div class="small-6 columns"><div class="row">.</div></div>
					<div class="small-2 columns">
						<div class="row login-dropdown-button" data-dropdown="drop2" aria-controls="drop2" aria-expanded="false">
							<div class="small-8 columns">
								OPTIONS
							</div>
							<div class="small-4 columns">								
								<i class="fi-wrench"></i>
							</div>	
						</div>						
					</div>
					<div class="small-2 columns">
						<div class="row right-off-canvas-toggle">
							<div class="small-8 columns">
								MENU
							</div>
							<div class="small-4 columns">
								<i class="fi-list"></i>
							</div>							
					</div>
				</div>
			</nav>

			<aside class="right-off-canvas-menu">
				<div class="off-canvas-list">
					<div class="row has-submenu">
						<form id="search-form" action="points">
							<div class="small-10 columns">
								<input type="text" name="search" placeholder="search everything">
							</div>
							<div class="small-2 columns search-text">
								<i class="fi-magnifying-glass"></i>
							</div>
						</form>
				        <script>
				        	var search = function(event) {
				        		event.preventDefault();
				        		$.get("points?"+$("#search-form").serialize())
				        		.done(function(points){
				        			clearPoints();
				        			points = JSON.parse(points);
				        			populateMarkers({
				        				points:points,
				        				parentElement: document.getElementById("points-search"),
				        				draggable: false
				        			});
				        		})
				        		$('.search-page').addClass('move-left');
								toggleCanvasDisabler();
				        		return false;
				        	}

				        	$("#search-form").submit(search);
				        	$(document).on('click','.fi-magnifying-glass',search);
				        </script>
				        <div class="search-page right-submenu">
					        <div class="small-12 columns">
					        	<a onclick="$('.search-page').removeClass('move-left');">back</a>
				        	</div>
					        <div class="small-12 columns">
					        	<div id="points-search"></div>
				        	</div>
				        </div>
					</div>

					<div class="row has-submenu">
						<div id="context" class="small-12 columns">
							<a onclick="toContextPage(); createContext($('#context-header')[0]); return false">add context</a>
						</div>

						<div class="points-page right-submenu">
					        <div class="small-12 columns">
								<div class="row">
									<div class="small-12 columns">
										<form id="points-search-form" action="points">
											<div class="small-10 columns">
												<input type="text" name="search" placeholder="search points">
											</div>
											<div class="small-2 columns search-text">
												<i class="points-search-button fi-magnifying-glass"></i>
											</div>
										</form>
								        <script>
								        	var search = function(event) {
								        		event.preventDefault();
								        		$.get("points?"+$("#points-search-form").serialize())
								        		.done(function(points){
								        			clearPoints();
								        			points = JSON.parse(points);
								        			populateMarkers({
								        				points:points,
								        				parentElement: document.getElementById("points"),
								        				draggable: false
								        			});
								        		})
								        		// $('.search-page').addClass('move-left');
												// toggleCanvasDisabler();
								        		return false;
								        	}

								        	$("#points-search-form").submit(search);
								        	$(document).on('click','.points-search-button',search);
								        </script>										
									</div>
							        <div class="small-12 columns">
							        	<div id="context-header"></div>
							        	<ul id="drop" class="f-dropdown" data-dropdown-content>
											<li><a href="#">Get link</a></li>
										</ul>
							        </div>
							        <div id="points" class="small-12 columns">
								        <a class="add-point-button" onclick="isAdding=true; return false">add point</a>
                        <div class="point-list">
                        </div>
							        </div>
						        </div>
					        </div>
				        </div>
					</div>
				</div>
			</aside>

			<section class="main-section">
				<div id="map-canvas"></div>
			</section>

			<a class="canvas-disabler exit-off-canvas"></a>
		</div>		
	</div>
	<script>
		$(document).foundation();
	</script>
</body>
</html>
